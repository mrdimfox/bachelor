\NeedsTeXFormat{LaTeX2e}

\RequirePackage{multicol}	% многоколоночность
\RequirePackage{textcomp}	% ввод различных знаков
\RequirePackage{floatflt}
\RequirePackage{float}
\RequirePackage{rotating}	% вращение объектов
\RequirePackage{calc}		% для возможности численных расчетов

\RequirePackage{ifthen}
\RequirePackage{geometry}
\RequirePackage{indentfirst}	% начинать абзацы с красной строки
\RequirePackage{listings}
\RequirePackage{caption}		% оформление подписей
\RequirePackage{longtable}
\RequirePackage{footnpag}			% внешний вид сносок
\RequirePackage[bottom]{footmisc}   % для установки сносок всегда внизу страницы
\RequirePackage{everypage}	 % вывод на каждой странице
\RequirePackage{enumitem}	 % для настройки списков

\ProvidesPackage{G2-105-95}
         [2002/12/12 v0.01 General reqs.]


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Размеры шрифтов
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand\large{\@setfontsize\large{14}{16.8}\selectfont}
\renewcommand\Large{\@setfontsize\Large{16}{19.2}\selectfont}
\renewcommand\small{\@setfontsize\small{10}{12}\selectfont}
\renewcommand\normalsize{\@setfontsize\normalsize{12}{14.4}\selectfont}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Настройки размера страницы
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Основные отступы
\geometry{
    a4paper,
	left=25mm,   % 20mm + 5mm
	right=10mm,   % 5mm + 5mm
	top=30mm,	 % 20mm + 10mm
	bottom=30mm  % 20mm + 10mm
}
\parindent=15mm
\AddEverypageHook{%
	\ifnum \thepage = 3%
		% Только для первой страницы
		\newgeometry{
			left=25mm,	 % 20mm + 5mm
			right=10mm,	 % 5mm + 5mm
			top=15mm,	 % 5mm + 10mm
			bottom=55mm  % 45mm + 10mm
		}
	\else%
		\restoregeometry%
	\fi%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Титульный лист и штампы
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\gostgrifsoglasovano#1{\gdef\@gostgrifsoglasovano{#1}} 
\def\gostgrifutverjdeno#1{\gdef\@gostgrifutverjdeno{#1}} 
\def\gosttitleobject#1{\gdef\@gosttitleobject{#1}}
\def\gosttitledocument#1{\gdef\@gosttitledocument{#1}} 
\def\gostklgi#1{\gdef\@gostklgi{#1}} 
\def\gosttitlecompany#1{\gdef\@gosttitlecompany{#1}} 
\def\gostutverdil#1{\gdef\@gostutverdil{#1}}
\def\gostnormokontroler#1{\gdef\@gostnormokontroler{#1}} 
\def\gostrazrabotchik#1{\gdef\@gostrazrabotchik{#1}} 
\def\gostproveril#1{\gdef\@gostproveril{#1}} 
\def\gostispolnitel#1{\gdef\@gostispolnitel{#1}} 
\def\gostlitera#1{\gdef\@gostlitera{#1}} 
\def\gostdate#1{\gdef\@gostdate{#1}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Переопределение пунктов (п.4.1.3)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifnum \c@secnumdepth < 4
	\newcommand{\theengost}{\thesection.\@arabic\c@engost}%              
	\newcounter{engost}[section]
\else                                                                         
   	\ifnum \c@secnumdepth < 5
		\newcommand{\theengost}{\thesubsection.\@arabic\c@engost}%
		\newcounter{engost}[subsection]
	\else                                                                       
		\ifnum \c@secnumdepth < 6
			\newcommand{\theengost}{\thesubsubsection.\@arabic\c@engost}%
			\newcounter{engost}[subsubsection]
		\else
			\ifnum \c@secnumdepth < 7
				\newcommand{\theengost}{\theparagraph.\@arabic\c@engost}%
				\newcounter{engost}[paragraph]
			\else
				\ifnum \c@secnumdepth < 8
					\newcommand{\theengost}{\thesubparagraph.\@arabic\c@engost}%
					\newcounter{engost}[subparagraph]
				\else
					\newcommand{\theengost}{\@arabic\c@engost}%
					\newcounter{engost}
				\fi
			\fi
       	\fi                                                                       
   	\fi                                                                         
\fi 


\newenvironment{engost}%
{%
	\renewcommand\item{%
		\par%
		\refstepcounter{engost}%
		\theengost
		%\arabic{section}.\arabic{subsection}.\arabic{engost}%
		\quad%
	}%
}%

\newcounter{ensubgost}[engost]	    			
\renewcommand{\theensubgost}{\theengost.\arabic{ensubgost}}%              
\newenvironment{ensubgost}
{%
	\renewcommand{\item}%
	{
		\par%
		\refstepcounter{ensubgost}%
		\theensubgost%
		\quad%
	}
}%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Раздел с новой страницы
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\gostnewpage}{\clearpage}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Переопределение вида разделов
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand\section{%                    
	\renewcommand{\theengost}{\thesection.\@arabic\c@engost}
	\setcounter{engost}{0}
	\gostnewpage                    
	\@startsection{section}{1}{\z@}%
		{-3.25ex \@plus -1ex \@minus -.2ex}%                                 		
		{1.5ex\@plus.2ex}%
		{\normalfont\Large\bfseries}%
}
		
\renewcommand\subsection{%
	\renewcommand{\theengost}{\thesubsection.\@arabic\c@engost}
	\setcounter{engost}{0}
	\@startsection{subsection}{2}{\z@}%
		{-3.25ex\@plus -1ex \@minus -.2ex}%
		{1.5ex \@plus .2ex}%
		{\normalfont\Large}
}

\renewcommand\subsubsection{%
	\renewcommand{\theengost}{\thesubsubsection.\@arabic\c@engost}%
	\setcounter{engost}{0}%
	\@startsection{subsubsection}{3}{\z@}%
		{-3.25ex\@plus -1ex \@minus -.2ex}%
		{1.5ex \@plus .2ex}%
		{\normalfont\large}%
}

\renewcommand\paragraph{%
	\renewcommand{\theengost}{\theparagraph.\@arabic\c@engost}
	\setcounter{engost}{0}
	\@startsection{paragraph}{4}{\parindent}%
		{3.25ex \@plus1ex \@minus.2ex}%
		{-1em}%
		{\normalfont\normalsize\bfseries}
}

\renewcommand\subparagraph{%
	\renewcommand{\theengost}{\thesubparagraph.\@arabic\c@engost}
	\setcounter{engost}{0}
	\@startsection{subparagraph}{5}{\parindent}%
		{3.25ex \@plus1ex \@minus .2ex}%
		{-1em}%
		{\normalfont\normalsize\bfseries}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Настройка вида подписей к рисункам и таблицам
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\captionsetup[figure]{%
	name=Рисунок,%
	justification=centering,%
	labelsep=endash,%
	font=large%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Настройка вида листингов
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand*{\lstlistingname}{Листинг}
\DeclareCaptionLabelFormat{listing}{#1 #2}
\DeclareCaptionLabelFormat{listingAppendix}{#1 \thesection.#2}
\DeclareCaptionLabelSeparator{dashsep}{~--~}
\captionsetup[lstlisting]{labelformat=listing, labelsep=dashsep, justification=centering}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Сноски со скобкой
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand\thefootnote{\@arabic\c@footnote)}%   


% Для выравнивания длинных таблиц
\LTleft=\z@
\LTright=\fill

\def\LT@makecaption#1#2#3{%                                                     
  \LT@mcol\LT@cols l{\hbox to\z@{\parbox[t]\LTcapwidth{%                    
      \sbox\@tempboxa{#1{#2\captionlabeldelim{} }#3}%                                                
          {\box\@tempboxa\hfil}%                                 
          \endgraf}%                                               
    \hss}}}

\def\NoFrames{%
	\ClearShipoutPicture%
	\renewcommand\BackgroundPicture[2]{}%
	\let\@oddfoot\@oldoddfoot%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Исключение некоторых русских букв из алфавита 
% для нумерации приложений
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\GostAsbuk#1{\expandafter\@GostAsbuk\csname c@#1\endcsname}
               
\def\@GostAsbuk#1{%
	\ifcase#1\relax
	\or А\or Б\or В\or Г\or Д%
	\or Е\or Ж\or И\or К\or Л%
	\or М\or Н\or П\or Р\or С%
	\or Т\or У\or Ф\or Х\or Ц%
	\or Ш\or Ю\or Я
\else
	\@ctrerr
\fi}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Настройка ненумерованных списков
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Тире в перечислении
\renewcommand{\labelitemi}{\normalfont\bfseries{--}}

% Отступы
\setlist[itemize,1]{leftmargin=15mm, itemsep=0mm}
\setlist[itemize,2]{leftmargin=15mm, itemsep=0mm}
\setlist[itemize,3]{leftmargin=15mm, itemsep=0mm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Настройка нумерованных списков
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Нумерация списков
\AddEnumerateCounter{\Asbuk}{\@Asbuk}{Ы}
\AddEnumerateCounter{\asbuk}{\@asbuk}{ы}
\renewcommand{\theenumi}{\asbuk{enumi})}
\renewcommand{\theenumii}{\arabic{enumii})}
\renewcommand\labelenumi{\theenumi}
\renewcommand\labelenumii{\theenumii}

% Отступы
\setlist[enumerate,1]{leftmargin=15mm, itemsep=0mm}
\setlist[enumerate,2]{leftmargin=15mm, itemsep=0mm}
\setlist[enumerate,3]{leftmargin=15mm, itemsep=0mm}